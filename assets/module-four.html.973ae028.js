import{r as t,o as e,c as o,a as n,b as c,F as l,e as a,d as s}from"./app.12407f86.js";import{_ as r}from"./plugin-vue_export-helper.21dcd24c.js";const u={},i=a('<h1 id="step-4-api-\u3068\u30C6\u3099\u30FC\u30BF\u30D8\u3099\u30FC\u30B9\u3092\u8FFD\u52A0\u3059\u308B" tabindex="-1"><a class="header-anchor" href="#step-4-api-\u3068\u30C6\u3099\u30FC\u30BF\u30D8\u3099\u30FC\u30B9\u3092\u8FFD\u52A0\u3059\u308B" aria-hidden="true">#</a> STEP 4: API \u3068\u30C7\u30FC\u30BF\u30D9\u30FC\u30B9\u3092\u8FFD\u52A0\u3059\u308B</h1><p>\u3053\u306E\u30B9\u30C6\u30C3\u30D7\u3067\u306F\u3001Amplify CLI \u3068\u30E9\u30A4\u30D6\u30E9\u30EA\u3092\u4F7F\u7528\u3057\u3066\u3001\u30A2\u30D7\u30EA\u306B GraphQL API \u3092\u8A2D\u5B9A\u3057\u3066\u8FFD\u52A0\u3057\u307E\u3059\u3002</p><h2 id="\u306F\u3057\u3099\u3081\u306B" tabindex="-1"><a class="header-anchor" href="#\u306F\u3057\u3099\u3081\u306B" aria-hidden="true">#</a> \u306F\u3058\u3081\u306B</h2><p>\u30A2\u30D7\u30EA\u3092\u4F5C\u6210\u3057\u3066\u8A8D\u8A3C\u3092\u8A2D\u5B9A\u3057\u305F\u3068\u3053\u308D\u3067\u3001API \u3092\u8FFD\u52A0\u3057\u307E\u3057\u3087\u3046\u3002<br><br> \u3053\u306E\u30E2\u30B8\u30E5\u30FC\u30EB\u3067\u306F\u3001Amplify CLI \u3068\u30E9\u30A4\u30D6\u30E9\u30EA\u3092\u4F7F\u7528\u3057\u3066\u30A2\u30D7\u30EA\u306B API \u3092\u8FFD\u52A0\u3057\u307E\u3059\u3002\u4F5C\u6210\u3059\u308B API \u306F GraphQL API \u3067\u3001Amazon DynamoDB (NoSQL \u30C7\u30FC\u30BF\u30D9\u30FC\u30B9) \u306B\u3088\u3063\u3066\u30B5\u30DD\u30FC\u30C8\u3055\u308C\u308B AWS AppSync (\u30DE\u30CD\u30FC\u30B8\u30C9 GraphQL \u30B5\u30FC\u30D3\u30B9) \u3092\u5229\u7528\u3057\u307E\u3059\u3002(GraphQL \u306E\u6982\u8981\u306B\u3064\u3044\u3066\u306F\u3001\u3053\u306E\u30DA\u30FC\u30B8\u306B\u30A2\u30AF\u30BB\u30B9\u3057\u3066\u304F\u3060\u3055\u3044)\u3002<br><br> \u4F5C\u6210\u3059\u308B\u30A2\u30D7\u30EA\u306F\u3001\u30E6\u30FC\u30B6\u30FC\u304C\u30E1\u30E2\u3092\u4F5C\u6210\u3001\u524A\u9664\u3001\u4E00\u89A7\u8868\u793A\u3067\u304D\u308B\u3088\u3046\u306B\u3059\u308B\u30E1\u30E2\u30A2\u30D7\u30EA\u3067\u3059\u3002\u3053\u306E\u4F8B\u304B\u3089\u3001\u4EBA\u6C17\u306E\u3042\u308B CRUD + L (\u4F5C\u6210\u3001\u8AAD\u307F\u53D6\u308A\u3001\u66F4\u65B0\u3001\u524A\u9664\u3001\u4E00\u89A7\u8868\u793A) \u30A2\u30D7\u30EA\u30B1\u30FC\u30B7\u30E7\u30F3\u306E\u591A\u304F\u3092\u69CB\u7BC9\u3059\u308B\u65B9\u6CD5\u304C\u3088\u304F\u5206\u304B\u308A\u307E\u3059\u3002</p><h2 id="\u5B66\u7FD2\u5185\u5BB9" tabindex="-1"><a class="header-anchor" href="#\u5B66\u7FD2\u5185\u5BB9" aria-hidden="true">#</a> \u5B66\u7FD2\u5185\u5BB9</h2><ul><li>Amplify \u30E9\u30A4\u30D6\u30E9\u30EA\u3092\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\u3059\u308B</li><li>\u8A8D\u8A3C\u30B5\u30FC\u30D3\u30B9\u3092\u4F5C\u6210\u3057\u3066\u30C7\u30D7\u30ED\u30A4\u3059\u308B</li><li>React \u30A2\u30D7\u30EA\u3092\u8A2D\u5B9A\u3057\u3066\u8A8D\u8A3C\u3092\u542B\u3081\u308B</li></ul><h2 id="\u4E3B\u8981\u306A\u6982\u5FF5" tabindex="-1"><a class="header-anchor" href="#\u4E3B\u8981\u306A\u6982\u5FF5" aria-hidden="true">#</a> \u4E3B\u8981\u306A\u6982\u5FF5</h2>',7),k=n("li",null,[n("strong",null,"API"),s(" \u2013 \u8907\u6570\u306E\u30BD\u30D5\u30C8\u30A6\u30A7\u30A2\u4EF2\u4ECB\u8005\u9593\u306E\u901A\u4FE1\u304A\u3088\u3073\u76F8\u4E92\u4F5C\u7528\u3092\u53EF\u80FD\u306B\u3059\u308B\u30D7\u30ED\u30B0\u30E9\u30DF\u30F3\u30B0\u30A4\u30F3\u30BF\u30FC\u30D5\u30A7\u30A4\u30B9\u3092\u63D0\u4F9B\u3057\u307E\u3059\u3002")],-1),b=n("strong",null,"GraphQL",-1),m=s(" \u2013 \u30A2\u30D7\u30EA\u30B1\u30FC\u30B7\u30E7\u30F3\u306E\u578B\u4ED8\u304D\u8868\u73FE\u306B\u57FA\u3065\u304F\u30AF\u30A8\u30EA\u8A00\u8A9E\u3068\u30B5\u30FC\u30D0\u30FC\u5074 API \u306E\u5B9F\u88C5\u3002\u3053\u306E API \u8868\u73FE\u306F\u3001GraphQL \u578B\u30B7\u30B9\u30C6\u30E0\u306B\u57FA\u3065\u304F\u30B9\u30AD\u30FC\u30DE\u3092\u4F7F\u7528\u3057\u3066\u5BA3\u8A00\u3055\u308C\u307E\u3059\u3002(GraphQL \u306E\u8A73\u7D30\u306B\u3064\u3044\u3066\u306F\u3001"),d={href:"https://graphql.org/learn/",target:"_blank",rel:"noopener noreferrer"},h=s("\u3053\u306E\u30DA\u30FC\u30B8"),g=s("\u306B\u30A2\u30AF\u30BB\u30B9\u3057\u3066\u304F\u3060\u3055\u3044)\u3002"),y=a(`<h2 id="\u6F14\u7FD2" tabindex="-1"><a class="header-anchor" href="#\u6F14\u7FD2" aria-hidden="true">#</a> \u6F14\u7FD2</h2><h3 id="graphql-api-\u3068\u30C6\u3099\u30FC\u30BF\u30D8\u3099\u30FC\u30B9\u3092\u4F5C\u6210\u3059\u308B" tabindex="-1"><a class="header-anchor" href="#graphql-api-\u3068\u30C6\u3099\u30FC\u30BF\u30D8\u3099\u30FC\u30B9\u3092\u4F5C\u6210\u3059\u308B" aria-hidden="true">#</a> GraphQL API \u3068\u30C7\u30FC\u30BF\u30D9\u30FC\u30B9\u3092\u4F5C\u6210\u3059\u308B</h3><ol><li>\u30A2\u30D7\u30EA\u30C7\u30A3\u30EC\u30AF\u30C8\u30EA\u306E\u30EB\u30FC\u30C8\u304B\u3089\u6B21\u306E\u30B3\u30DE\u30F3\u30C9\u3092\u5B9F\u884C\u3057\u3066\u3001GraphQL API \u3092\u30A2\u30D7\u30EA\u306B\u8FFD\u52A0\u3057\u307E\u3059\u3002</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>amplify <span class="token function">add</span> api

? Select from one of the below mentioned services: <span class="token punctuation">(</span>Use arrow keys<span class="token punctuation">)</span>
<span class="token operator">&gt;</span> GraphQL

? Here is the GraphQL API that we will create. Select a setting to edit or <span class="token builtin class-name">continue</span>
  Name: noteapp\uFF1C\u30E6\u30FC\u30B6\u30FC\u540D\uFF1E
  Authorization modes: API key <span class="token punctuation">(</span>default, expiration time: <span class="token number">7</span> days from now<span class="token punctuation">)</span>
  Conflict detection <span class="token punctuation">(</span>required <span class="token keyword">for</span> DataStore<span class="token punctuation">)</span>: Disabled
<span class="token operator">&gt;</span> Continue

? Choose a schema template:
<span class="token operator">&gt;</span> Single object with fields <span class="token punctuation">(</span>e.g., \u201CTodo\u201D with ID, name, description<span class="token punctuation">)</span>

<span class="token comment"># y \u3092\u5165\u529B\u3057\u307E\u3057\u3087\u3046\u3002</span>
\u221A Do you want to edit the schema now? <span class="token punctuation">(</span>Y/n<span class="token punctuation">)</span> \xB7 <span class="token function">yes</span>

<span class="token comment"># \u4F7F\u7528\u4E2D\u306E\u30A8\u30C7\u30A3\u30BF\u3092\u9078\u629E\u3059\u308B\u3002\uFF08\u3053\u3053\u3067\u306F Visual Studio Code \u3092\u9078\u629E\u3059\u308B\uFF09</span>
? Choose your default editor: <span class="token punctuation">(</span>Use arrow keys<span class="token punctuation">)</span>
<span class="token operator">&gt;</span> Visual Studio Code
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><ol start="2"><li>1.\u306E\u6700\u5F8C\u306E\u9078\u629E\u5F8C\u3001\u30D5\u30A1\u30A4\u30EB\u304C\u958B\u304B\u308C\u305F\u3089\u6B21\u306E\u30B3\u30FC\u30C9\u3067\u3059\u3079\u3066\u4E0A\u66F8\u304D\u3057\u307E\u3059\u3002</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># This &quot;input&quot; configures a global authorization rule to enable public access to
# all models in this schema. Learn more about authorization rules here: https://docs.amplify.aws/cli/graphql/authorization-rules
# input AMPLIFY { globalAuthRule: AuthRule = { allow: public } } # FOR TESTING ONLY!

type Note @model  @auth(rules: [
  { allow: owner }
]) {
  id: ID!
  name: String!
  description: String
}

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>\u203B \u30D5\u30A1\u30A4\u30EB\u304C\u81EA\u52D5\u3067\u958B\u304B\u308C\u306A\u3044\u5834\u5408\u306F <strong>amplify\\backend\\api\\noteapp\uFF1C\u30E6\u30FC\u30B6\u30FC\u540D\uFF1E\\schema.graphql</strong>\u3000\u3092\u30A8\u30C7\u30A3\u30BF\u3067\u958B\u304D\u307E\u3057\u3087\u3046\u3002<br><br> 3. \u30D5\u30A1\u30A4\u30EB\u3092\u4FDD\u5B58\u3057\u307E\u3059\u3002</p><h3 id="api-\u3092\u30C6\u3099\u30D5\u309A\u30ED\u30A4\u3059\u308B" tabindex="-1"><a class="header-anchor" href="#api-\u3092\u30C6\u3099\u30D5\u309A\u30ED\u30A4\u3059\u308B" aria-hidden="true">#</a> API \u3092\u30C7\u30D7\u30ED\u30A4\u3059\u308B</h3><p>API \u304C\u30ED\u30FC\u30AB\u30EB\u3067\u8A2D\u5B9A\u3055\u308C\u305F\u306E\u3067\u3001\u4ECA\u5EA6\u306F\u305D\u308C\u3092\u30C7\u30D7\u30ED\u30A4\u3057\u307E\u3059\u3002\u3053\u308C\u3092\u884C\u3046\u306B\u306F\u3001<code>amplify push</code> \u30B3\u30DE\u30F3\u30C9\u3092\u5B9F\u884C\u3057\u307E\u3059\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>amplify push --y
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>\u30A2\u30AB\u30A6\u30F3\u30C8\u3067 GraphQL API \u3092\u3044\u3064\u3067\u3082\u8868\u793A\u3059\u308B\u306B\u306F\u3001\u6B21\u306E\u30B3\u30DE\u30F3\u30C9\u3092\u5B9F\u884C\u3057\u307E\u3059\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>amplify console api
? Select from one of the below mentioned services: <span class="token punctuation">(</span>Use arrow keys<span class="token punctuation">)</span>
<span class="token operator">&gt;</span> GraphQL
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></div><h3 id="api-\u3068\u5BFE\u8A71\u3059\u308B\u305F\u3081\u306E\u30D5\u30ED\u30F3\u30C8\u30A8\u30F3\u30C8\u3099\u30B3\u30FC\u30C8\u3099\u3092\u8A18\u8FF0\u3059\u308B" tabindex="-1"><a class="header-anchor" href="#api-\u3068\u5BFE\u8A71\u3059\u308B\u305F\u3081\u306E\u30D5\u30ED\u30F3\u30C8\u30A8\u30F3\u30C8\u3099\u30B3\u30FC\u30C8\u3099\u3092\u8A18\u8FF0\u3059\u308B" aria-hidden="true">#</a> API \u3068\u5BFE\u8A71\u3059\u308B\u305F\u3081\u306E\u30D5\u30ED\u30F3\u30C8\u30A8\u30F3\u30C9\u30B3\u30FC\u30C9\u3092\u8A18\u8FF0\u3059\u308B</h3><p>\u30D0\u30C3\u30AF\u30A8\u30F3\u30C9\u304C\u30C7\u30D7\u30ED\u30A4\u3055\u308C\u305F\u306E\u3067\u3001\u30E6\u30FC\u30B6\u30FC\u304C\u30E1\u30E2\u3092\u4F5C\u6210\u3001\u4E00\u89A7\u8868\u793A\u3001\u524A\u9664\u3067\u304D\u308B\u3088\u3046\u306B\u3059\u308B\u30B3\u30FC\u30C9\u3092\u8A18\u8FF0\u3057\u307E\u3057\u3087\u3046\u3002<br><br><strong>src/App.js</strong> \u3092\u6B21\u306E\u30B3\u30FC\u30C9\u3067\u66F4\u65B0\u3057\u307E\u3059\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Auth <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;aws-amplify&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;react&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&#39;@aws-amplify/ui-react/styles.css&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">API</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;aws-amplify&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Authenticator <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@aws-amplify/ui-react&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> listNotes <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./graphql/queries&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createNote <span class="token keyword">as</span> createNoteMutation<span class="token punctuation">,</span> deleteNote <span class="token keyword">as</span> deleteNoteMutation <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./graphql/mutations&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> initialFormState <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">description</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span> <span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>notes<span class="token punctuation">,</span> setNotes<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>formData<span class="token punctuation">,</span> setFormData<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>initialFormState<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">fetchNotes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">fetchNotes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> apiData <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token constant">API</span><span class="token punctuation">.</span><span class="token function">graphql</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 
      <span class="token literal-property property">query</span><span class="token operator">:</span> listNotes<span class="token punctuation">,</span>
      <span class="token literal-property property">authMode</span><span class="token operator">:</span> <span class="token string">&quot;AMAZON_COGNITO_USER_POOLS&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">authToken</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token keyword">await</span> Auth<span class="token punctuation">.</span><span class="token function">currentSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getIdToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getJwtToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setNotes</span><span class="token punctuation">(</span>apiData<span class="token punctuation">.</span>data<span class="token punctuation">.</span>listNotes<span class="token punctuation">.</span>items<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">createNote</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>formData<span class="token punctuation">.</span>name <span class="token operator">||</span> <span class="token operator">!</span>formData<span class="token punctuation">.</span>description<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token constant">API</span><span class="token punctuation">.</span><span class="token function">graphql</span><span class="token punctuation">(</span><span class="token punctuation">{</span> 
      <span class="token literal-property property">query</span><span class="token operator">:</span> createNoteMutation<span class="token punctuation">,</span>
      <span class="token literal-property property">variables</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">input</span><span class="token operator">:</span> formData <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">authMode</span><span class="token operator">:</span> <span class="token string">&quot;AMAZON_COGNITO_USER_POOLS&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">authToken</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token keyword">await</span> Auth<span class="token punctuation">.</span><span class="token function">currentSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getIdToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getJwtToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setNotes</span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token operator">...</span>notes<span class="token punctuation">,</span> formData <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setFormData</span><span class="token punctuation">(</span>initialFormState<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">deleteNote</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> id <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> newNotesArray <span class="token operator">=</span> notes<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">note</span> <span class="token operator">=&gt;</span> note<span class="token punctuation">.</span>id <span class="token operator">!==</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setNotes</span><span class="token punctuation">(</span>newNotesArray<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> <span class="token constant">API</span><span class="token punctuation">.</span><span class="token function">graphql</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">query</span><span class="token operator">:</span> deleteNoteMutation<span class="token punctuation">,</span>
      <span class="token literal-property property">variables</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">input</span><span class="token operator">:</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">authMode</span><span class="token operator">:</span> <span class="token string">&quot;AMAZON_COGNITO_USER_POOLS&quot;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">authToken</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token keyword">await</span> Auth<span class="token punctuation">.</span><span class="token function">currentSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getIdToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getJwtToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Authenticator<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> signOut<span class="token punctuation">,</span> user <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;App&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>My Notes <span class="token function">App</span> <span class="token punctuation">(</span>User<span class="token operator">:</span> <span class="token punctuation">{</span>user<span class="token punctuation">.</span>username<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>input
            onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token function">setFormData</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>formData<span class="token punctuation">,</span> <span class="token string-property property">&#39;name&#39;</span><span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
            placeholder<span class="token operator">=</span><span class="token string">&quot;Note name&quot;</span>
            value<span class="token operator">=</span><span class="token punctuation">{</span>formData<span class="token punctuation">.</span>name<span class="token punctuation">}</span>
          <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>input
            onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token function">setFormData</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>formData<span class="token punctuation">,</span> <span class="token string-property property">&#39;description&#39;</span><span class="token operator">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
            placeholder<span class="token operator">=</span><span class="token string">&quot;Note description&quot;</span>
            value<span class="token operator">=</span><span class="token punctuation">{</span>formData<span class="token punctuation">.</span>description<span class="token punctuation">}</span>
          <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>createNote<span class="token punctuation">}</span><span class="token operator">&gt;</span>Create Note<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token literal-property property">marginBottom</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
            <span class="token punctuation">{</span>
              notes<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">note</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
                <span class="token operator">&lt;</span>div key<span class="token operator">=</span><span class="token punctuation">{</span>note<span class="token punctuation">.</span>id <span class="token operator">||</span> note<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>h2<span class="token operator">&gt;</span><span class="token punctuation">{</span>note<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>note<span class="token punctuation">.</span>description<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">deleteNote</span><span class="token punctuation">(</span>note<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>Delete note<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
              <span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>signOut<span class="token punctuation">}</span><span class="token operator">&gt;</span>Sign out<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Authenticator<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br></div></div><p>\u30A2\u30D7\u30EA\u306B\u306F 3 \u3064\u306E\u4E3B\u8981\u306A\u6A5F\u80FD\u304C\u3042\u308A\u307E\u3059\u3002</p><ol><li>fetchNotes - \u3053\u306E\u95A2\u6570\u306F\u3001API \u30AF\u30E9\u30B9\u3092\u4F7F\u7528\u3057\u3066\u30AF\u30A8\u30EA\u3092 GraphQL API \u306B\u9001\u4FE1\u3057\u3001\u30E1\u30E2\u306E\u30EA\u30B9\u30C8\u3092\u53D6\u5F97\u3057\u307E\u3059\u3002</li><li>createNote - \u3053\u306E\u95A2\u6570\u306F\u3001API \u30AF\u30E9\u30B9\u3092\u4F7F\u7528\u3057\u3066\u30AF\u30A8\u30EA\u3068\u5909\u6570\uFF08\u30E1\u30E2\u306E\u60C5\u5831\uFF09\u3092 GraphQL API \u306B\u9001\u4FE1\u3057\u3001\u65B0\u3057\u3044\u30E1\u30E2\u3092\u4F5C\u6210\u3057\u307E\u3059\u3002</li><li>deleteNote - createNote \u3068\u540C\u69D8\u306B\u3001\u3053\u306E\u95A2\u6570\u306F\u5909\u6570\u3068\u5171\u306B\u30AF\u30A8\u30EA\u3092 GraphQL API\u306B\u9001\u4FE1\u3057\u307E\u3059\u304C\u3001\u30E1\u30E2\u3092\u4F5C\u6210\u3059\u308B\u4EE3\u308F\u308A\u306B\u30E1\u30E2\u3092\u524A\u9664\u3057\u307E\u3059\u3002</li></ol><h3 id="\u30A2\u30D5\u309A\u30EA\u3092\u5B9F\u884C\u3059\u308B" tabindex="-1"><a class="header-anchor" href="#\u30A2\u30D5\u309A\u30EA\u3092\u5B9F\u884C\u3059\u308B" aria-hidden="true">#</a> \u30A2\u30D7\u30EA\u3092\u5B9F\u884C\u3059\u308B</h3><p>\u30A2\u30D7\u30EA\u3092\u30ED\u30FC\u30AB\u30EB\u74B0\u5883\u3067\u5B9F\u884C\u3057\u3001\u30E6\u30FC\u30B6\u30FC\u304C\u30E1\u30E2\u3092\u4F5C\u6210\u3001\u4E00\u89A7\u8868\u793A\u3001\u524A\u9664\u3067\u304D\u308B\u3053\u3068\u3092\u78BA\u8A8D\u3057\u307E\u3057\u3087\u3046\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> start
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h1 id="\u307E\u3068\u3081" tabindex="-1"><a class="header-anchor" href="#\u307E\u3068\u3081" aria-hidden="true">#</a> \u307E\u3068\u3081</h1><p>\u3053\u308C\u3067\u3001\u30E1\u30E2\u30A2\u30D7\u30EA\u304C\u4F5C\u6210\u3055\u308C\u307E\u3057\u305F\u3002AWS Amplify\u3092\u4F7F\u7528\u3057\u3066\u3001GraphQL API\u3092\u8FFD\u52A0\u3057\u3001\u30A2\u30D7\u30EA\u306E\u4F5C\u6210\u3001\u8AAD\u307F\u53D6\u308A\u3001\u524A\u9664\u6A5F\u80FD\u3092\u69CB\u6210\u3057\u307E\u3057\u305F\u3002\u6B21\u306E\u30B9\u30C6\u30C3\u30D7\u3067\u306F\u3001\u30A2\u30D7\u30EA\u306B\u30B9\u30C8\u30EC\u30FC\u30B8\u30B5\u30FC\u30D3\u30B9\u3092\u8FFD\u52A0\u3057\u307E\u3059\u3002</p>`,21);function f(w,A){const p=t("ExternalLinkIcon");return e(),o(l,null,[i,n("ul",null,[k,n("li",null,[b,m,n("a",d,[h,c(p)]),g])]),y],64)}var I=r(u,[["render",f]]);export{I as default};
